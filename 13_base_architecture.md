# Базовая архитектура с учётом ограничений бизнес-требований, НФТ, выбранной архитектуры, адресация атрибутов качества

Проектируемое приложение — высоконагруженная система (HighLoad) с большим числом пользователей и разнообразным функционалом: управление тренировками, социальное взаимодействие, магазин экипировки, финансовые операции и маркетинг. Архитектура должна обеспечивать масштабируемость, отказоустойчивость, безопасность и удобство развития.

---

## Ограничения и бизнес-требования  
- **Высокая доступность:** ≥99% uptime, минимальное время простоя (не более 8 часов в год).  
- **Производительность:** Обработка до 50 000 запросов в секунду, время отклика для основных операций не превышает 500 мс.  
- **Безопасность:** Соответствие региональным требованиям и законам о хранении и обработке персональных данных, шифрование данных, многофакторная аутентификация.  
- **Масштабируемость:** Горизонтальное масштабирование сервисов и баз данных под рост пользователей.  
- **Гибкость:** Возможность быстрой интеграции новых функций и изменений без остановки системы.  
- **Надёжность:** Автоматическое восстановление после сбоев, резервирование данных.  
- **Юзабилити:** Быстрая загрузка интерфейсов, адаптивность под разные устройства.

---

## Выбранный тип архитектуры  
**Микросервисная архитектура** с разделением по доменам (Domain-Driven Design):  
- Каждый домен (пользовательский, тренировочный, социальный, финансовый, маркетинговый, административный) реализован группой отдельных сервисов.  
- Взаимодействие через REST/gRPC API и событийную шину (Kafka) для асинхронной коммуникации.  
- Использование API Gateway для маршрутизации и балансировки нагрузки.  
- Контейнеризация сервисов (Docker + Kubernetes) для управления масштабированием и отказоустойчивостью.

---

## Основные компоненты и их взаимосвязи  
- **API Gateway:** централизованная точка входа, маршрутизация запросов, аутентификация, ограничение нагрузки.  
- **Микросервисы доменов:** каждый отвечает за свою бизнес-логику и хранит собственные данные (полиглотное хранение: SQL, NoSQL, временные ряды).  
- **Событийная шина:** обеспечивает обмен событиями между сервисами, поддерживает eventual consistency.  
- **Система аутентификации и авторизации:** централизованная, с поддержкой OAuth2 и JWT.  
- **Кэширование:** Redis для динамических данных, CDN для статики.  
- **Мониторинг и логирование:** ELK Stack для логов, Prometheus + Grafana для метрик и алертинга.  
- **CI/CD пайплайны:** автоматизация сборки, тестирования и деплоя микросервисов.

---

## Адресация атрибутов качества (НФТ)

| Атрибут качества     | Как обеспечивается архитектурой                                | Комментарии                                   |
|---------------------|---------------------------------------------------------------|-----------------------------------------------|
| Масштабируемость    | Микросервисы, Kubernetes, горизонтальное масштабирование       | Легко добавлять новые инстансы сервисов       |
| Отказоустойчивость  | Репликация баз, автоматический failover, health checks         | Минимизация времени простоя                     |
| Производительность  | Кэширование, асинхронная обработка через события, оптимизация запросов | Быстрый отклик и высокая пропускная способность |
| Безопасность        | Централизованная аутентификация, шифрование, аудит            | Соответствие региональным требованиям и законам о хранении и обработке персональных данных          |
| Поддерживаемость    | Чёткое разделение доменов, стандартизованные API, документация | Упрощение разработки и внедрения изменений     |
| Гибкость            | Событийная архитектура, API Gateway, контейнеризация           | Быстрая интеграция новых функций                |
| Юзабилити           | Быстрая загрузка через CDN, оптимизация фронтенда              | Улучшенный пользовательский опыт                |


### Общая архитектурная схема

![Общая архитектурная схема](images/components2.svg)