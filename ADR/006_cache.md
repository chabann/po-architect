# ADR 006: Стратегия кэширования и оптимизации производительности

## Контекст  
Система должна обеспечивать высокую производительность при большом числе запросов с минимальной задержкой для динамических и статических данных.

## Варианты решения  
1. Cache Aside — гибкое управление кэшем, подходит для динамических данных.  
2. Read Through — автоматическая загрузка данных в кэш, удобна для справочников.  
3. Cache Ahead — предварительное обновление кэша, снижает нагрузку на БД.  
4. Многоуровневое кэширование — Redis + CDN + клиентский кэш для максимальной оптимизации.

## Принятое решение  
Комбинированный подход:  
- Cache Aside для динамических данных (чаты, профили)  
- Read Through для справочников (каталог товаров)  
- Redis Cluster для кэширования с секционированием  
- CDN для статического контента  
- Клиентское кэширование с ETag/Last-Modified

## Обоснование  
- Cache Aside обеспечивает гибкую инвалидацию и устойчивость к сбоям.  
- Read Through упрощает работу с часто изменяемыми справочниками.  
- CDN снижает нагрузку и ускоряет доставку статики.  
- Redis Cluster масштабируем и оптимизирован для разных типов данных.

## Последствия  
- Необходимы механизмы инвалидации и мониторинга кэша.  
- Повышенная сложность инфраструктуры и администрирования.  
- Дополнительные расходы на CDN и обучение команды.